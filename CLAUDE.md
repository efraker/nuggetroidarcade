# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

This is "Nuggetroid Arcade", a React-based game arcade application designed for easy game development. The project uses a modular architecture where new games can be added by simply creating a folder structure under `src/games/`, and the main application will automatically discover and route to them.

## Development Commands

- `npm run dev` - Start the Vite development server
- `npm run build` - Build for production
- `npm run lint` - Run ESLint
- `npm run preview` - Preview production build locally

## Tech Stack

- **Framework**: React 19+ with React Router DOM
- **Build Tool**: Vite 7+
- **Styling**: Tailwind CSS 4+ (using PostCSS)
- **Linting**: ESLint with React hooks and refresh plugins
- **Deployment**: GitHub Pages (configured with `/nuggetroidarcade/` basename)

## Architecture

### Auto-Discovery Game System

The application uses Vite's `import.meta.glob` feature to automatically discover games:

```javascript
const gameModules = import.meta.glob('./games/**/*.jsx', { eager: true });
```

This scans `src/games/` for any `.jsx` files and automatically creates routes and menu entries for them.

### Game Structure

Each game should follow this structure:
```
src/games/
‚îú‚îÄ‚îÄ game-name/
‚îÇ   ‚îú‚îÄ‚îÄ game-name.jsx          # Main game component (default export)
‚îÇ   ‚îî‚îÄ‚îÄ game-name-AI-notes.md  # Optional AI development notes
```

The folder name becomes the URL path (e.g., `/word-wizard`), and the display name is auto-generated by capitalizing and spacing the folder name.

### Routing Configuration

- **Base Path**: `/nuggetroidarcade/` (configured for GitHub Pages)
- **Home Route**: `/` - Shows the game menu
- **Game Routes**: Automatically generated from folder names in `src/games/`

## Configuration Files

### PostCSS Setup
The project uses CommonJS syntax for PostCSS configuration due to Tailwind CSS 4+ requirements:
```javascript
module.exports = {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
}
```

### Tailwind Configuration
Uses standard Tailwind 4+ setup with content scanning configured for the project structure.

### ESLint Rules
- Uses modern ESLint flat config
- Includes React hooks and refresh plugins
- Custom rule: `no-unused-vars` with exception for uppercase constants

## Adding New Games

1. Create a new folder under `src/games/` with a kebab-case name
2. Add a `.jsx` file with the same name as the folder
3. Export a default React component
4. The game will automatically appear in the menu and be routable

## Shared Visual Effects System

The arcade includes a comprehensive visual effects system available to all games:

### Architecture
- **Location**: `src/shared/` directory
- **Components**: Reusable effect components (smoke, shuriken, confetti, emoji rain, lightning, etc.)
- **Hooks**: `useGameEffects` hook for trigger-based animation management
- **Configuration**: Centralized animation timing and combinations

### Usage in Games
```javascript
// Import shared effects system
import { useGameEffects } from '../../shared/hooks/useGameEffects';
import { EffectContainer } from '../../shared/components/effects/EffectContainer';
import { EFFECT_COMBOS } from '../../shared/config/animations';

// Use in component
const { effects, triggerEffect, triggerMultipleEffects } = useGameEffects();

// Trigger effects
triggerEffect('confetti', 2000);
triggerMultipleEffects(EFFECT_COMBOS.correctAnswer);

// Render with effects
<EffectContainer effects={effects} emojiTheme="american">
  <YourGameContent />
</EffectContainer>
```

### Available Effects
- **Basic**: smoke, shuriken, confetti, lightning, sparks
- **Animated UI**: scoreGlow, transition effects, streak displays
- **Themed**: emojiRain with 15+ country/theme presets including Ancient Rome, Space Race, Pirates
- **Combinations**: Pre-built effect sequences for game events, streaks, achievements
- **Audio**: 9 ninja-themed sounds synchronized with visual effects

### Progression Systems
The arcade includes shared progression systems:
- **Streak System**: Tracks consecutive correct answers with 6 milestone levels (3, 5, 7, 10, 15, 20+)
- **Achievement System**: Unlockable achievements with special emoji rain themes  
- **Score Multipliers**: Streaks provide 1.5x to 5x score bonuses
- **Audio-Visual Sync**: All effects perfectly synchronized with ninja-themed sounds

### Benefits
- **Consistent Experience**: All games share the same polished visual language and progression
- **Easy Integration**: Drop-in components with automatic cleanup
- **Performance Optimized**: Mobile-friendly with 60fps targeting
- **Extensible**: New effects, achievements, and categories benefit all games automatically
- **Engaging Progression**: Streaks, achievements, and combos keep players motivated

## Current State

The project includes **two fully implemented games** with comprehensive progression systems:

### **History Ninja** ü•∑
- Complete history quiz game with 5 categories (American, Ancient Rome, Space Race, Pirates, + more)
- Full audio-visual effects with ninja-themed sounds
- Streak system with lightning effects for 3, 5, 7, 10+ correct answers
- Achievement system with unlockable emoji rain themes
- Country-specific celebrations (Roman temples, space rockets, pirate ships)

### **Word Wizard** üßô‚Äç‚ôÇÔ∏è  
- Advanced spelling game with text-to-speech integration
- 4 difficulty levels (Easy ‚Üí Expert) with progressive word complexity
- Coin economy with unlockable cosmetic skins
- Same streak/achievement system adapted for spelling
- Lightning effects for spelling streaks with score multipliers

### **Shared Systems**
All games utilize the **shared effects architecture** including:
- üéµ 9 ninja-themed sounds synchronized with actions
- ‚ö° Universal streak system with 6 milestone levels  
- üèÜ Cross-game achievement system with emoji rain rewards
- üéä 15+ themed emoji celebrations (countries, achievements, special effects)
- üéØ Performance-optimized for 60fps on mobile devices

The **auto-discovery system** and **routing** are fully functional - new games automatically appear in the menu when added to `src/games/`.

## Known Issues

Previous setup encountered PostCSS configuration issues that have been resolved by using the current CommonJS configuration format and proper Tailwind CSS 4+ dependencies.